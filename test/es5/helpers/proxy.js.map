{"version":3,"sources":["../../helpers/proxy.js"],"names":[],"mappings":";;;AAGA,YAAY,CAAA;AACZ,IAAI,GAAG,GAAG,OAAO,CAAC,KAAK,CAAC,CAAA;AACxB,IAAI,OAAO,GAAG,EAAE,CAAA;;AAEhB,IAAI,WAAW,GAAG,GAAG,CAAC,YAAY,CAAE,UAAU,MAAM,EAAG;AACtD,KAAI,OAAO,GAAG,GAAG,CAAC,gBAAgB,CAAC;AAClC,MAAI,EAAE,WAAW;AACjB,MAAI,EAAE,IAAI;EACV,CAAC,CAAA;AACF,QAAO,CAAC,IAAI,CAAE,MAAM,CAAE,CAAA;AACtB,OAAM,CAAC,IAAI,CAAE,OAAO,CAAE,CAAA;AACtB,QAAO,CAAC,EAAE,CAAC,KAAK,EAAE;SAAM,MAAM,CAAC,GAAG,EAAE;EAAA,CAAE,CAAA;AACtC,OAAM,CAAC,EAAE,CAAC,KAAK,EAAE;SAAM,OAAO,CAAC,GAAG,EAAE;EAAA,CAAE,CAAA;AACtC,QAAO,CAAC,EAAE,CAAC,OAAO,EAAE;SAAM,MAAM,CAAC,GAAG,EAAE;EAAA,CAAE,CAAA;AACxC,OAAM,CAAC,EAAE,CAAC,OAAO,EAAE;SAAM,OAAO,CAAC,GAAG,EAAE;EAAA,CAAE,CAAA;AACxC,QAAO,CAAC,EAAE,CAAC,OAAO,EAAE;SAAM,MAAM,CAAC,GAAG,EAAE;EAAA,CAAE,CAAA;AACxC,OAAM,CAAC,EAAE,CAAC,OAAO,EAAE;SAAM,OAAO,CAAC,GAAG,EAAE;EAAA,CAAE,CAAA;CACxC,CAAE,CAAA;;AAEH,WAAW,CAAC,EAAE,CAAC,YAAY,EAAE,UAAA,MAAM,EAAI;AACtC,QAAO,CAAC,IAAI,CAAE,MAAM,CAAE,CAAA;CACtB,CAAC,CAAA;;AAEF,MAAM,CAAC,OAAO,GAAG;AAChB,OAAM,EAAE,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;AAC5C,KAAI,EAAE,gBAAW;AAChB,SAAO,CAAC,OAAO,CAAE,UAAA,MAAM,EAAI;AAC1B,SAAM,CAAC,GAAG,EAAE,CAAA;GACZ,CAAE,CAAA;AACH,aAAW,CAAC,KAAK,EAAE,CAAA;EACnB;;CAED,CAAA","file":"proxy.js","sourcesContent":["/**\n * Created by caasjj on 10/15/15.\n */\n'use strict'\nvar net = require('net')\nvar sockets = []\n\nvar proxyServer = net.createServer( function( client ) {\n\tvar proxied = net.createConnection({\n\t\thost: 'localhost',\n\t\tport: 6379\n\t})\n\tproxied.pipe( client )\n\tclient.pipe( proxied )\n\tproxied.on('end', () => client.end() )\n\tclient.on('end', () => proxied.end() )\n\tproxied.on('error', () => client.end() )\n\tclient.on('error', () => proxied.end() )\n\tproxied.on('close', () => client.end() )\n\tclient.on('close', () => proxied.end() )\n} )\n\nproxyServer.on('connection', socket => {\n\tsockets.push( socket )\n})\n\nmodule.exports = {\n\tlisten: proxyServer.listen.bind(proxyServer),\n\tfail: function() {\n\t\tsockets.forEach( socket => {\n\t\t\tsocket.end()\n\t\t} )\n\t\tproxyServer.close()\n\t}\n\n}"]}